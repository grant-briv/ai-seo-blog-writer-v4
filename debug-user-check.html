<!DOCTYPE html>
<html>
<head>
    <title>Debug User Database</title>
    <script src="https://unpkg.com/dexie@latest/dist/dexie.js"></script>
</head>
<body>
    <h1>User Database Debug</h1>
    <div id="results"></div>
    
    <script>
        // Define the database structure same as the app
        const db = new Dexie('AiSEOBlogWriterDB');
        db.version(1).stores({
            users: 'id, username, role',
            writerProfiles: 'id, ownerId, agentName',
            savedBlogPosts: 'id, userId, blogTitle, savedAt',
            topicSearches: '++id, userId, searchQuery, createdAt',
            appSettings: 'key'
        });

        async function checkDatabase() {
            try {
                await db.open();
                console.log('Database opened successfully');
                
                // Check all users
                const users = await db.users.toArray();
                console.log('All users:', users);
                
                // Check for kasia specifically
                const kasia = await db.users.where('username').equals('kasia').first();
                console.log('Kasia user:', kasia);
                
                // Check for admin
                const admin = await db.users.where('username').equals('admin').first();
                console.log('Admin user:', admin);
                
                // Update the results div
                document.getElementById('results').innerHTML = `
                    <h2>Database Check Results:</h2>
                    <p><strong>Total users:</strong> ${users.length}</p>
                    <p><strong>Users found:</strong> ${users.map(u => u.username).join(', ')}</p>
                    <p><strong>Kasia exists:</strong> ${kasia ? 'Yes' : 'No'}</p>
                    <p><strong>Admin exists:</strong> ${admin ? 'Yes' : 'No'}</p>
                    <h3>User Details:</h3>
                    <pre>${JSON.stringify(users, null, 2)}</pre>
                `;
                
            } catch (error) {
                console.error('Database error:', error);
                document.getElementById('results').innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
            }
        }

        // Run check when page loads
        checkDatabase();
    </script>
</body>
</html>